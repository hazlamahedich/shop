Party Mode Tooling Structure
=============================

Project Root
├── Configuration
│   ├── .pre-commit-config.yaml          # Pre-commit hooks
│   ├── .github/workflows/
│   │   └── party-mode-validation.yml    # CI/CD pipeline
│   └── pre-commit-setup.sh              # Setup script
│
├── IDE Integration
│   └── .vscode/
│       ├── settings.json                # Editor settings
│       ├── extensions.json              # Recommended extensions
│       └── snippets/
│           ├── python.code-snippets     # Python templates
│           └── typescript.code-snippets # TS/React templates
│
├── Backend Hooks
│   └── backend/scripts/hooks/
│       ├── __init__.py                  # Package init
│       ├── test_colocation.py           # Validate test files exist
│       └── openapi_gen.py               # Generate OpenAPI spec
│
├── Frontend Hooks
│   └── frontend/scripts/hooks/
│       ├── test-colocation.js           # Validate test files exist
│       └── api-version.js               # Validate /api/v1/ prefix
│
└── Documentation
    ├── TOOLING_ENFORCEMENT_REPORT.md    # Complete specification
    ├── SETUP_GUIDE.md                   # Setup instructions
    ├── QUICK_REFERENCE.md               # Pattern reference
    ├── TOOLING_README.md                # Implementation status
    └── IMPLEMENTATION_SUMMARY.md        # This summary


Pattern Enforcement Matrix
===========================

Pattern                     | Pre-commit | CI/CD | IDE   | Auto-fix
----------------------------+------------+-------+-------+----------
Test co-location           |     ✓      |   ✓   |       |     -
API response envelope       |     -      |   ✓   | Snippet|    -
Error code registry         |     -      |   ✓   | Snippet|    -
Naming conventions          |     ✓      |   ✓   |   ✓   |    ✓
Type synchronization        |     ✓      |   ✓   |   ✓   |    ✓
API versioning             |     ✓      |   ✓   |       |    -


Implementation Phases
======================

Phase 1: Must-Have (COMPLETE)
  Time: 5-15 minutes
  Status: All files created, ready to use

  ✓ Pre-commit hooks configuration
  ✓ Test colocation validators (Python + TS)
  ✓ OpenAPI spec generator
  ✓ API version validator
  ✓ CI/CD pipeline
  ✓ VS Code integration
  ✓ Code snippets
  ✓ Setup script

Phase 2: Should-Have (SPECIFIED)
  Time: 6-8 hours
  Status: Code provided in TOOLING_ENFORCEMENT_REPORT.md

  - Custom Pylint plugin (API response, error codes)
  - Custom ESLint plugin (API versioning, patterns)
  - Error code registry validator
  - Contract validation script
  - Test coverage matrix generator
  - Error documentation generator

Phase 3: Nice-to-Have (DOCUMENTED)
  Time: 4-6 hours
  Status: Tool recommendations provided

  - Docker linting (hadolint)
  - Markdown linting (markdownlint)
  - Secrets detection (detect-secrets)
  - Advanced IDE profiles (PyCharm)


Quick Start Commands
====================

# Initial setup (one time)
bash pre-commit-setup.sh

# Backend setup
cd backend && python -m venv .venv
source .venv/bin/activate
pip install pre-commit black isort flake8 bandit mypy
pre-commit install

# Frontend setup
cd frontend && npm install

# Run all hooks manually
pre-commit run --all-files

# Generate OpenAPI spec
cd backend && python -m scripts.hooks.openapi_gen

# Generate TypeScript types
cd frontend && npx openapi-typescript ../backend/openapi.json -o src/types/api.generated.ts


File Locations
==============

Configuration:
  .pre-commit-config.yaml              - Hook definitions
  .github/workflows/party-mode-validation.yml  - CI pipeline
  pre-commit-setup.sh                  - Automated setup

Backend:
  backend/scripts/hooks/__init__.py     - Hook package
  backend/scripts/hooks/test_colocation.py  - Test validator
  backend/scripts/hooks/openapi_gen.py  - OpenAPI generator

Frontend:
  frontend/scripts/hooks/test-colocation.js  - Test validator
  frontend/scripts/hooks/api-version.js  - API version validator

IDE:
  .vscode/settings.json                - Editor config
  .vscode/extensions.json              - Extensions
  .vscode/snippets/*.code-snippets     - Code templates

Documentation:
  TOOLING_ENFORCEMENT_REPORT.md        - Full spec (primary)
  SETUP_GUIDE.md                       - Setup instructions
  QUICK_REFERENCE.md                   - Pattern reference
  TOOLING_README.md                    - Status overview
  IMPLEMENTATION_SUMMARY.md            - Executive summary


Tools & Versions
================

Core:
  pre-commit: 4.5.0
  python: 3.11
  node: 20.x

Python:
  black: 24.1.1        # Formatting
  isort: 5.13.2        # Import sorting
  flake8: 7.0.0        # Linting
  pylint: 3.0.0        # Analysis (Phase 2)
  mypy: 1.8.0          # Type checking
  bandit: 1.7.6        # Security
  safety: 3.0.1        # Dependency scanning

TypeScript:
  typescript: 5.3.0    # Language
  eslint: 8.56.0       # Linting
  prettier: 3.1.0      # Formatting
  openapi-typescript: 6.7.0  # Type generation

Testing:
  pytest: 7.4.0        # Python tests
  vitest: 1.0.0        # TypeScript tests

Infrastructure:
  docker: 24.x         # Containers
  github-actions: latest  # CI/CD


Pattern Enforcement Details
============================

1. Test Structure (Co-location)
   Pattern:  module.py → test_module.py
   Enforced:  Pre-commit hooks, CI/CD
   Tools:     test_colocation.py, test-colocation.js
   Fix:       Manual (create test file)

2. API Response Envelope
   Pattern:  {data: ..., meta: {request_id, timestamp}}
   Enforced:  Pylint plugin (Phase 2), CI/CD
   Tools:     pylint_api_response.py
   Fix:       Manual (use snippet)

3. Error Code Registry
   Pattern:  All exceptions register ErrorCode enum
   Enforced:  Pylint plugin (Phase 2)
   Tools:     pylint_error_registry.py
   Fix:       Manual (register in enum)

4. Naming Conventions
   Pattern:  snake_case (DB) → camelCase (API)
   Enforced:  Pydantic auto-conversion
   Tools:     Built-in Pydantic
   Fix:       Automatic

5. Type Synchronization
   Pattern:  TS types from OpenAPI spec
   Enforced:  Pre-commit, CI/CD
   Tools:     openapi_gen.py, openapi-typescript
   Fix:       Automatic (regenerate)

6. API Versioning
   Pattern:  /api/v1/ prefix required
   Enforced:  ESLint plugin, custom hook
   Tools:     api-version.js
   Fix:       Manual (update URL)


VS Code Snippets
================

Python:
  api-response      → Response with envelope
  api-error         → Error with envelope
  api-endpoint      → FastAPI endpoint template
  exception         → Domain exception
  test-header       → Test file template

TypeScript:
  api-call          → API function with envelope
  api-error-type    → Error interface
  api-response-type → Response interface
  api-hook          → React Query hook
  component-with-test → Component template


Metrics & Targets
=================

Pre-commit:
  Pass rate target: >95%
  Runtime: <30 seconds
  Files checked: All staged

CI/CD:
  Duration: <5 minutes
  Coverage: >70%
  Type coverage: >80%

Quality:
  Lint violations: 0
  Security issues: 0
  Pattern violations: 0


Maintenance
===========

Weekly:
  - Update dependencies (security patches)
  - Review hook performance
  - Update documentation

Monthly:
  - Review and update tool versions
  - Add new patterns as needed
  - Tune false positives

Quarterly:
  - Major tool upgrades
  - Pattern review and refinement
  - Developer feedback review


